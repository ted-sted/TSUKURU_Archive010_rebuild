    *, *::before, *::after {
      box-sizing: border-box;
    }

:root {
  color-scheme: light;

  /* Mini audio player motion tuning */
  --mini-ease: cubic-bezier(.2,.8,.2,1);
  --mini-t-in: 240ms;    /* 出現（transform/影） */
  --mini-t-out: 240ms;   /* 退場（transform/影） */
  --mini-t-opacity: 220ms;
  --mini-t-filter: 260ms;
  --mini-hide-delay: 260ms; /* 退場時に visibility を隠す遅延 */
  --mini-blur: 6px;
}

    html {
      font-size: 18px;
      scroll-behavior: smooth;
      background: linear-gradient(to bottom, #e5e7eb, #f9fafb);
    }

    body {
      margin: 0;
      font-family: "M PLUS Rounded 1c", system-ui, -apple-system,
        BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Yu Gothic",
        "Meiryo", sans-serif;
      background: transparent;
      color: #111827;
      line-height: 1.8;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

header {
  background: #696969;        /* ← ここだけ変更 */
  color: #e5e7eb;
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 50;
  border-bottom: 1px solid #4b5563;  /* 少し柔らかいグレーのラインに */
}

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1.5rem;
    }

    .site-title {
      font-size: 1.1rem;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 1.2rem;
      margin: 0;
      padding: 0;
      font-size: 0.95rem;
    }

    nav a {
      opacity: 0.9;
      color: #e5e7eb;
    }

    nav a:hover {
      opacity: 1;
      text-decoration: none;
      border-bottom: 2px solid #38bdf8;
      padding-bottom: 0.12rem;
    }

    section {
      padding: 3.5rem 0 3rem;
    }

    section:nth-of-type(odd) {
      background: #f9fafb;
    }

    section:nth-of-type(even) {
      background: #f3f4f6;
    }

    h1, h2, h3, h4 {
      margin: 0 0 0.5rem;
      font-weight: 700;
      color: #111827;
    }

    h1 {
      font-size: 1.9rem;
      letter-spacing: 0.03em;
    }

    h2 {
      font-size: 1.5rem;
      margin-bottom: 1.2rem;
      border-left: 4px solid #0ea5e9;
      padding-left: 0.6rem;
      padding-right: 0.4rem;
      background: linear-gradient(
        90deg,
        rgba(14, 165, 233, 0.08),
        rgba(249, 250, 251, 0)
      );
      border-radius: 4px;
    }

    h3 {
      font-size: 1.12rem;
    }

    p {
      margin: 0.3rem 0 0.7rem;
      color: #374151;
    }

    .muted {
      font-size: 0.85rem;
      color: #6b7280;
    }

    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
    }

    .hero-main {
      background: radial-gradient(circle at top left, #f9fafb, #e5e7eb);
      border-radius: 18px;
      padding: 2rem 1.8rem;
      border: 1px solid #d4d4d8;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.12);
      color: #111827;
    }

    .hero-subtitle {
      font-size: 1.3rem;
      font-weight: 600;
      color: #4b5563;
      margin-bottom: 0.6rem;
    }

    .hero-catch {
      font-size: 0.85rem;
      margin-top: 0.4rem;
      color: #4b5563;
      opacity: 0.95;
    }

    .hero-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.75rem;
      margin-top: 1.5rem;
      align-items: stretch;
    }

    .hero-stat {
      padding: 0.55rem 0.85rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #d4d4d8;
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
    }

    .hero-stat-label {
      font-size: 0.7rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #6b7280;
      margin-bottom: 0.1rem;
    }

    .hero-stat-value {
      font-size: 0.98rem;
      font-weight: 600;
      color: #111827;
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      padding: 1.4rem 1.3rem 1.5rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
      will-change: transform, box-shadow;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 55px rgba(15, 23, 42, 0.13);
    }

    .chart-layout {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.5fr);
      gap: 1.8rem;
      margin-bottom: 2rem;
    }

    .chart-container {
      position: relative;
      width: 100%;
      height: 320px;
    }

    .table-scroll {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      background: #ffffff;
    }

    th, td {
      padding: 0.55rem 0.6rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
      white-space: nowrap;
    }

    th {
      background: #f3f4f6;
      color: #111827;
    }

    tbody tr:nth-child(odd) {
      background: #ffffff;
    }

    tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .list-toggle {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.2rem 0;
      background: transparent;
      border: none;
      color: #111827;
      font-size: 1.02rem;
      font-weight: 600;
      text-align: left;
      cursor: pointer;
    }

    .list-toggle span {
      pointer-events: none;
    }

    .list-toggle-indicator {
      font-size: 1.2rem;
      line-height: 1;
      color: #6b7280;
    }

    .list-toggle:hover .list-toggle-indicator {
      color: #111827;
    }

    .list-panel {
      margin-top: 0.6rem;
    }

    .career-link {
      color: inherit;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
    }

    .career-link:hover {
      text-decoration: underline;
    }

    .career-color-dot {
      display: inline-block;
      width: 0.7rem;
      height: 0.7rem;
      border-radius: 999px;
      margin-right: 0.4rem;
      border: 1px solid rgba(15, 23, 42, 0.4);
      flex-shrink: 0;
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .timeline-item {
      position: relative;
      background: #ffffff;
      border-radius: 14px;
      padding: 1.1rem 1.2rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
      scroll-margin-top: 0;
      will-change: transform, box-shadow;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .timeline-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 55px rgba(15, 23, 42, 0.13);
    }

    .timeline-item-accent {
      overflow: hidden;
    }

    .timeline-item-accent::before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 3px;
    }

    .timeline-item-food {
      border-color: rgba(56, 189, 248, 0.45);
    }
    .timeline-item-food::before {
      background: linear-gradient(90deg, #36aee4, rgba(54, 174, 228, 0));
    }

    .timeline-item-system {
      border-color: rgba(168, 85, 247, 0.45);
    }
    .timeline-item-system::before {
      background: linear-gradient(90deg, #9b4ae0, rgba(155, 74, 224, 0));
    }

    .timeline-item-store {
      border-color: rgba(249, 115, 22, 0.45);
    }
    .timeline-item-store::before {
      background: linear-gradient(90deg, #f18324, rgba(241, 131, 36, 0));
    }

    .timeline-item-retail {
      border-color: rgba(34, 197, 94, 0.45);
    }
    .timeline-item-retail::before {
      background: linear-gradient(90deg, #1fa857, rgba(31, 168, 87, 0));
    }

    .timeline-item-finance {
      border-color: rgba(225, 29, 72, 0.45);
    }
    .timeline-item-finance::before {
      background: linear-gradient(90deg, #d81e4a, rgba(216, 30, 74, 0));
    }

    .timeline-item-wood {
      border-color: rgba(250, 204, 21, 0.55);
    }
    .timeline-item-wood::before {
      background: linear-gradient(90deg, #e7b814, rgba(231, 184, 20, 0));
    }

    .timeline-item-light {
      border-color: rgba(14, 165, 233, 0.5);
    }
    .timeline-item-light::before {
      background: linear-gradient(90deg, #0d9ad8, rgba(13, 154, 216, 0));
    }

    .timeline-item-auto {
      border-color: rgba(139, 92, 246, 0.5);
    }
    .timeline-item-auto::before {
      background: linear-gradient(90deg, #7e54e0, rgba(126, 84, 224, 0));
    }

    .timeline-item-azen {
      border-color: rgba(249, 115, 115, 0.6);
    }
    .timeline-item-azen::before {
      background: linear-gradient(90deg, #f26a6a, rgba(242, 106, 106, 0));
    }

    .timeline-period {
      font-size: 0.9rem;
      color: #6b7280;
    }

    .timeline-desc {
      font-size: 0.92rem;
      color: #374151;
    }

    .timeline-header {
      position: relative;
      padding-right: 1.4rem;
      cursor: pointer;
    }

    .timeline-header p {
      margin: 0.1rem 0;
    }

    .timeline-meta {
      font-size: 0.9rem;
      color: #4b5563;
    }

    .timeline-item-accent .timeline-title {
      font-size: 1.18rem;
      font-weight: 700;
    }

    .timeline-item-accent .timeline-meta:first-of-type {
      font-weight: 500;
    }

    .timeline-item-food   .timeline-meta:first-of-type { color: #0ea5e9; }
    .timeline-item-system .timeline-meta:first-of-type { color: #a855f7; }
    .timeline-item-store  .timeline-meta:first-of-type { color: #f97316; }
    .timeline-item-retail .timeline-meta:first-of-type { color: #22c55e; }
    .timeline-item-finance .timeline-meta:first-of-type { color: #e11d48; }
    .timeline-item-wood   .timeline-meta:first-of-type { color: #ca8a04; }
    .timeline-item-light  .timeline-meta:first-of-type { color: #0ea5e9; }
    .timeline-item-auto   .timeline-meta:first-of-type { color: #8b5cf6; }
    .timeline-item-azen   .timeline-meta:first-of-type { color: #f97373; }

    .timeline-item-accent .timeline-meta:last-of-type {
      font-style: italic;
      opacity: 0.95;
    }

    .timeline-body {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px solid #e5e7eb;
    }

    .timeline-body .timeline-desc + .timeline-desc {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px dashed rgba(148, 163, 184, 0.55);
    }

    .timeline-indicator {
      position: absolute;
      right: 0.1rem;
      top: 0.3rem;
      font-size: 1.1rem;
      color: #9ca3af;
    }

    .timeline-collapsible.is-open .timeline-indicator {
      color: #4b5563;
    }

    .timeline-header:focus-visible {
      outline: 2px solid #0ea5e9;
      outline-offset: 2px;
      border-radius: 4px;
    }

    .grid-products {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1.4rem;
    }

    .product-card p {
      font-size: 0.92rem;
      color: #374151;
    }

/* 基本理念カードの行間だけ微調整 */
.product-card p.principle-lines {
  margin-bottom: 0.15rem;  /* ← ここを小さくすると上とのすき間が詰まる */
}

.product-card p.principle-tagline {
  margin-top: 0;
  margin-bottom: 0;
}

    .product-card ul {
      margin: 0.4rem 0 0.2rem;
      padding-left: 1.2rem;
    }

    .product-card li {
      margin: 0.15rem 0;
    }

    .product-note {
      font-size: 0.75rem;
      font-weight: 400;
      color: #6b7280;
      margin-left: 0.3rem;
    }

    #california-roll .product-header p {
      font-size: 0.85rem;
      color: #4b5563;
    }

    .product-card-collapsible {
      position: relative;
      padding-right: 2.4rem;
    }

    .product-header {
      position: relative;
      cursor: pointer;
    }

    .product-header:focus-visible {
      outline: 2px solid #0ea5e9;
      outline-offset: 4px;
      border-radius: 4px;
    }

    .product-body {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px solid #e5e7eb;
      font-size: 0.9rem;
    }

    .product-indicator {
      position: absolute;
      right: 0.2rem;
      top: 0.1rem;
      font-size: 1.2rem;
      color: #9ca3af;
    }

    .product-card-collapsible.is-open .product-indicator {
      color: #4b5563;
    }

    .product-divider {
      margin: 0.9rem 0;
      border-top: 1px dashed rgba(148, 163, 184, 0.55);
    }

    .product-body-title,
    .product-body-emphasis {
      font-weight: 600;
      font-size: 1rem;
      color: #111827;
    }

    .fade-in-up {
      opacity: 0;
      transform: translateY(var(--reveal-y, 18px)) scale(var(--reveal-scale, 0.985));
      filter: blur(var(--reveal-blur, 6px));
      transition:
        opacity 0.86s cubic-bezier(.2,.8,.2,1),
        transform 0.86s cubic-bezier(.2,.8,.2,1),
        filter 0.86s cubic-bezier(.2,.8,.2,1);
      transition-delay: var(--reveal-delay, 0ms);
      will-change: transform, opacity, filter;
    }

    .fade-in-up.is-visible {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }

    @media (prefers-reduced-motion: reduce) {
      .fade-in-up,
      .fade-in-up.is-visible {
        transition: none !important;
        transform: none !important;
        filter: none !important;
        opacity: 1 !important;
      }
    }

    footer {
      background: #e5e7eb;
      color: #4b5563;
      padding: 1.4rem 0;
      text-align: center;
      font-size: 0.85rem;
      border-top: 1px solid #d1d5db;
    }

    @media (max-width: 900px) {
      .chart-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .grid-products {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 720px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.4rem;
      }
      nav ul {
        flex-wrap: wrap;
        gap: 0.7rem;
      }
      section {
        padding: 2.8rem 0 2.4rem;
      }
      .hero-main {
        padding: 1.6rem 1.4rem;
      }
    }

    @media (max-width: 480px) {
      html {
        font-size: 17px;
      }
      h1 {
        font-size: 1.6rem;
      }
      h2 {
        font-size: 1.35rem;
      }
      .chart-container {
        height: 260px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
      }
      .fade-in-up {
        opacity: 1 !important;
        transform: none !important;
      }
    }

#intro h1 {
  font-size: 2.1rem;
  letter-spacing: 0.04em;
}

#intro .hero-subtitle {
  font-size: 1.2rem;
  font-weight: 500;
  color: #4b5563;
}

#intro .hero-main {
  background: radial-gradient(circle at top left, #fefefe, #e5e7eb);
  border-radius: 20px;
  padding: 2.2rem 2rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.10);
}

h2 {
  border-left: 4px solid #0284c7;
  background: linear-gradient(
    90deg,
    rgba(2, 132, 199, 0.08),
    rgba(249, 250, 251, 0)
  );
}

header nav a:hover {
  border-bottom-color: #0284c7;
}

.card {
  padding: 1.6rem 1.5rem 1.7rem;
  border-radius: 18px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.10);
}

.card h3 {
  font-size: 1.05rem;
  letter-spacing: 0.04em;
  margin-bottom: 0.7rem;
}

.product-card p {
  font-size: 0.9rem;
  line-height: 1.8;
}

.timeline-desc {
  font-size: 0.9rem;
  line-height: 1.85;
}

#intro .hero-main {
  max-width: 760px;
  margin: 0 auto;
}

#intro .hero-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1.1rem;
}

#intro .hero-stat {
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid #d4d4d8;
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10);
  min-width: 210px;
}

#intro .hero-stat-label {
  font-size: 0.7rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: #6b7280;
  margin-bottom: 0.1rem;
}

#intro .hero-stat-value {
  font-size: 0.98rem;
  font-weight: 600;
  color: #111827;
}

#intro {
  padding-top: 2.4rem;
  padding-bottom: 2.7rem;
}

#intro h1 {
  font-size: 2.05rem;
  letter-spacing: 0.04em;
}

#intro .hero-subtitle {
  font-size: 1.18rem;
  font-weight: 500;
  margin-bottom: 0.4rem;
}

#intro .hero-catch {
  margin-top: 0.3rem;
  margin-bottom: 0.1rem;
}

html {
  background: #e5e7eb;
}

section:nth-of-type(odd) {
  background: #f3f4f6;
}

section:nth-of-type(even) {
  background: #e5e7eb;
}

.card {
  background: #f9fafb;
}

footer {
  background: #696969;        /* ← ここだけ変更 */
  color: #e5e7eb;
  border-top: 1px solid #4b5563;
}

footer a {
  color: inherit;
  text-decoration: underline;
}

#intro .hero-stat-value {
  margin-top: 0.05rem;
}

#intro {
  padding-top: 2rem;
  padding-bottom: 2.4rem;
}

#intro .hero-main {
  padding: 1.6rem 1.8rem 1.4rem;
}

.tagline-like {
  font-style: italic;
  color: #0369a1;
  letter-spacing: 0.06em;
}

.section-header {
  margin-bottom: 0.6rem;
}

.section-label {
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: #9ca3af;
  margin: 0 0 0.1rem;
}

section {
  padding: 3.2rem 0 2.8rem;
  border-top: 1px solid rgba(148, 163, 184, 0.4);
  scroll-margin-top: 50px;
}

section#intro {
  border-top: none;
}

#intro h1 {
  font-size: 2.1rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.site-title {
  letter-spacing: 0.18em;
}

#intro h1 {
  margin-bottom: 0.1rem;
  line-height: 1.25;
}

#intro .hero-subtitle {
  margin-top: 0;
  margin-bottom: 0.2rem;
  line-height: 1.3;
}

#intro .hero-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  align-items: center;
  justify-content: flex-start;
  margin-top: 0.9rem;
  padding: 0.6rem 0.9rem;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.96);
  border: 1px solid #d4d4d8;
  box-shadow: 0 14px 32px rgba(15, 23, 42, 0.12);
}

#intro .hero-stat {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  min-width: 0;
}

#intro .hero-stat-value {
  font-size: 1.02rem;
  font-weight: 600;
}

#overview h3 {
  margin-bottom: 0.15rem;
}

#overview h3 + .muted {
  margin-top: 0.05rem;
}

#activities ul {
  margin: 0.3rem 0 0;
  padding-left: 0;
  list-style: none;
  font-size: 0.88rem;
  color: #4b5563;
}

#activities li {
  margin: 0.08rem 0;
  padding-left: 1.1rem;
  position: relative;
}

#activities li::before {
  content: "・";
  position: absolute;
  left: 0;
  top: 0.1rem;
  font-size: 0.8rem;
  color: #9ca3af;
}

#intro .hero-tagline {
  font-size: 0.9rem;
  color: #4b5563;
  margin: 0 0 0.15rem;
}

#intro .hero-title-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  align-items: baseline;
  margin-top: 0.05rem;
}

#intro .hero-title-row h1 {
  margin: 0;
}

#intro .hero-title-row .hero-subtitle {
  margin: 0;
}

.section-hint {
  margin-top: -0.1rem;
  margin-bottom: 0.9rem;
  font-size: 0.8rem;
  color: #9ca3af;
}

.toggle-hint {
  font-size: 0.8rem;
  color: #9ca3af;
}

#intro .hero-main {
  margin-left: 0;
  margin-right: auto;
  text-align: left;
}

#intro .hero-title-row h1 {
  font-size: 1.9rem;
  font-weight: 600;
  letter-spacing: 0.06em;
}

#intro .hero-title-row .hero-subtitle {
  font-size: 1rem;
  font-weight: 400;
  color: #6b7280;
}

#california-roll h3 {
  font-style: italic;
  letter-spacing: 0.06em;
}

#intro .hero-title-row h1 {
  font-size: 1.5rem;
  font-weight: 500;
  color: #111827;
  letter-spacing: 0.02em;
  text-transform: none;
}
    
#message .purpose-main {
  font-size: 0.98rem;
  font-weight: 500;
  color: #111827;
  margin-top: 0.2rem;
  margin-bottom: 0.8rem;
}

.purpose-main {
  font-size: 1.05rem;
  font-weight: 600;
  margin-top: 0.2rem;
  margin-bottom: 0.2rem;
}

.purpose-sub-en {
  margin-top: 0;
  margin-bottom: 0.3rem;
  font-size: 0.9rem;
  font-weight: 600;
  font-style: italic;
  letter-spacing: 0.06em;
  color: #0369a1;
  line-height: 0.8;
}

.purpose-desc {
  font-size: 0.9rem;
  color: #4b5563;
  margin-top: 0.2rem;
  margin-bottom: 0.8rem;
}

#message .purpose-main {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  line-height: 1.8 !important;
}

#message .purpose-sub-en {
  margin-top: 0 !important;
  margin-bottom: 0.7rem !important;
  line-height: 1.8 !important;
  font-size: 0.9rem;
  font-weight: 600 !important;
  font-style: italic;
  letter-spacing: 0.06em;
  color: inherit !important;
}

#message .purpose-desc {
  margin-top: 0 !important;
}

#message .closing-line {
  font-weight: 600;
}

/* 音声カード内のタイトルをクリック可能っぽく */
#audio .audio-link-label {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  color: #0369a1;
  cursor: pointer;
  border-bottom: 1px solid rgba(37, 99, 235, 0.35);
}

#audio .audio-link-label:hover {
  color: #0ea5e9;
  border-bottom-color: #0ea5e9;
}

/* カード内のaudioプレイヤーは隠しておいて、ミニプレイヤーで再生する */
#audio .audio-player {
  display: none;
}

/* クレジットの小さめグレー（既に入れていたらそのままでOK） */
#audio .audio-credit {
  font-size: 0.85em;
  color: #6b7280;
}


/* audioカード内の各ブロックの余白 */
#audio .audio-item {
  margin-bottom: 1.2rem;
}

.audio-mini-inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0.75rem 1.25rem;
  background: #111827;
  color: #e5e7eb;
  display: flex;
  align-items: center;
  gap: 1rem;
  border-top: 1px solid #1f2937;
}

.audio-mini-meta {
  flex: 1 1 auto;
  min-width: 0;
}

.audio-mini-label {
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: #9ca3af;
  margin-bottom: 0.1rem;
}

.audio-mini-title {
  font-size: 0.9rem;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#audio-mini-element {
  max-width: 320px;
  flex: 0 0 auto;
}

.audio-mini-close {
  border: none;
  background: transparent;
  color: #9ca3af;
  cursor: pointer;
  font-size: 1rem;
  padding: 0.1rem 0.3rem;
  margin-right: 0.25rem;
}

.audio-mini-close:hover {
  color: #e5e7eb;
}

@media (max-width: 640px) {
  .audio-mini-inner {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  #audio-mini-element {
    width: 100%;
  }
}

/* カリフォルニアロール本文の読み幅を少しだけ狭める */
#california-roll .product-body {
  max-width: 70ch;  /* 70文字前後の幅 */
  margin: 0 auto;
}

/* 再生中のタイトルにバッジを付ける */
#audio .audio-link-label.is-playing::after {
  content: " 再生中";
  font-size: 0.75rem;
  color: #d7ad05; /* ちょっと明るい黄 */
}

#california-roll {
  scroll-margin-top: 80px;
}

.js-open-california {
  cursor: pointer;
}

.js-open-california:hover {
  text-decoration: underline;
}

.tagline-like {
  font-style: italic;
  color: #0369a1;
  letter-spacing: 0.06em;
  display: inline-block; /* ← これを足す */
}

/* ===== ScrollSpy: 現在地ナビ強調（ヘッダー配色に合わせる） ===== */
header nav a.is-active,
header nav a[aria-current="page"] {
  opacity: 1;
  color: #e5e7eb;               /* nav a の通常色に合わせる（黒にしない） */
  border-bottom: 2px solid #38bdf8; /* nav a:hover と同じアクセント */
  padding-bottom: 0.12rem;
}

header nav a.is-active:hover,
header nav a[aria-current="page"]:hover {
  border-bottom-color: #38bdf8;
}

/* ===== セクション見出し: さりげない下線ハイライト ===== */
.section-header h2 {
  position: relative;
  display: inline-block;
  padding-bottom: 0.22rem;
}

.section-header h2::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 3px;
  border-radius: 999px;
  background: rgba(2, 132, 199, 0.55);
  transform: scaleX(0);
  transform-origin: left;
  opacity: 0;
  transition: transform 320ms ease, opacity 320ms ease;
}

/* “今いるセクション”だけ下線が出る */
section.is-active .section-header h2::after {
  transform: scaleX(1);
  opacity: 1;
}

/* 動きを減らす設定ではアニメーション停止 */
@media (prefers-reduced-motion: reduce) {
  .section-header h2::after {
    transition: none;
  }
}

/* ===== Hover対象を詳細（timeline）にも拡張 ===== */
.card,
.timeline-item {
  transition: transform 180ms ease, box-shadow 220ms ease;
  will-change: transform;
}

@media (hover: hover) {
  .card:hover,
  .timeline-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 22px 56px rgba(15, 23, 42, 0.14);
  }
}

.card:focus-within,
.timeline-item:focus-within {
  transform: translateY(-2px);
  box-shadow: 0 22px 56px rgba(15, 23, 42, 0.14);
}

@media (prefers-reduced-motion: reduce) {
  .card,
  .timeline-item {
    transition: none;
  }
}

/* 画面下部のミニオーディオプレイヤー（is-visibleで出し入れ：変数版） */
.audio-mini-player {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 60;

  opacity: 0;
  transform: translateY(100%);
  filter: blur(var(--mini-blur));
  visibility: hidden;
  pointer-events: none;
  box-shadow: none;

  transition:
    opacity var(--mini-t-opacity) ease,
    transform var(--mini-t-out) var(--mini-ease),
    filter var(--mini-t-filter) ease,
    visibility 0s linear var(--mini-hide-delay),
    box-shadow var(--mini-t-out) ease;
  will-change: opacity, transform, filter;
}

.audio-mini-player.is-visible {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
  visibility: visible;
  pointer-events: auto;
  box-shadow: 0 -10px 30px rgba(15, 23, 42, 0.35);

  transition:
    opacity var(--mini-t-opacity) ease,
    transform var(--mini-t-in) var(--mini-ease),
    filter var(--mini-t-filter) ease,
    visibility 0s linear 0s,
    box-shadow var(--mini-t-in) ease;
}

@media (prefers-reduced-motion: reduce) {
  .audio-mini-player {
    transition: none;
    transform: none;
    filter: none;
  }
}

/* =========================================================
   2025-26 UI Motion Patch (non-destructive)
   - KPI boot overlay (成分集計中)
   - Progress ring
   - Focus panel (成分詳細カード表示) + background scroll lock
   ========================================================= */

/* Body scroll lock (modal open) */
body.modal-open{
  position: fixed;
  left: 0; right: 0;
  width: 100%;
  overflow: hidden;
}

/* Progress ring */  

/* Focus panel backdrop */
.backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(7px);
  z-index: 1000;
}

/* Focus panel (right / bottom on mobile) */
.focusPanel{
  position: fixed;
  /* Higher placement; respect safe-area on notch devices */
  top: max(4px, env(safe-area-inset-top));
  right: 12px;
  bottom: max(10px, env(safe-area-inset-bottom));
  width: min(560px, calc(100vw - 24px));
  background: rgba(255,255,255,.92);
  border-radius: 16px;
  box-shadow: 0 18px 55px rgba(0,0,0,.14);
  border: 1px solid rgba(0,0,0,.10);
  transform: translateX(16px);
  opacity: 0;
  pointer-events: none;
  z-index: 1050;
  display: grid;
  grid-template-rows: 52px 1fr;
  overscroll-behavior: contain; /* prevent scroll chaining (supported browsers) */
}
.focusPanel.is-open{
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
  transition: transform 420ms cubic-bezier(.2,.8,.2,1), opacity 420ms cubic-bezier(.2,.8,.2,1);
}
.focusTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 8px 10px 8px 14px;
  border-bottom: 1px solid rgba(0,0,0,.10);
}
.focusTitle{
  font-size: 13px;
  color: rgba(0,0,0,.60);
}
.focusClose{
  width: 38px;
  height: 38px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.85);
  cursor: pointer;
}
.focusBody{
  overflow: auto;
  padding: 14px 16px 20px;
  overscroll-behavior: contain; /* prevent scroll chaining */
  -webkit-overflow-scrolling: touch;
}

/* Mobile: slide from bottom */
@media (max-width: 820px){
  .focusPanel{
    left: 12px;
    right: 12px;
    width: auto;
    top: auto;
    bottom: max(8px, env(safe-area-inset-bottom));
    /* Raise the sheet by increasing height (still bottom-sheet style) */
    height: min(82vh, 720px);
    transform: translateY(18px);
  }
  .focusPanel.is-open{
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce){
  .focusPanel.is-open{ transition: none; }
}


/* ================================
   Next Step UI Enhancements
   - MiniMap (right rail)
   - Table ↔ Timeline linking highlight
   - FLIP/flight ghost styling
   ================================ */

.miniMap{
  position: fixed;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 995;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px 9px;
  border-radius: 999px;
  border: 1px solid rgba(17,24,39,.16);
  background: rgba(255,255,255,.74);
  backdrop-filter: blur(10px);
  box-shadow: 0 16px 40px rgba(15,23,42,.10);
}

.miniDot{
  position: relative;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: none;
  background: rgba(17,24,39,.22);
  cursor: pointer;
  transition: transform .18s cubic-bezier(.2,.8,.2,1), background .18s cubic-bezier(.2,.8,.2,1);
}

.miniDot:hover{
  transform: scale(1.15);
  background: rgba(17,24,39,.34);
}

.miniDot.is-active,
.miniDot[aria-current="true"]{
  background: rgba(17,24,39,.92);
  transform: scale(1.25);
}

.miniDot:focus-visible{
  outline: 2px solid rgba(56,189,248,.75);
  outline-offset: 4px;
}

.miniDot::after{
  content: attr(data-label);
  position: absolute;
  right: calc(100% + 10px);
  top: 50%;
  transform: translateY(-50%) translateX(6px);
  opacity: 0;
  pointer-events: none;
  white-space: nowrap;
  font-size: 12px;
  line-height: 1;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(17,24,39,.18);
  background: rgba(255,255,255,.86);
  backdrop-filter: blur(10px);
  box-shadow: 0 14px 34px rgba(15,23,42,.12);
  transition: opacity .16s cubic-bezier(.2,.8,.2,1), transform .16s cubic-bezier(.2,.8,.2,1);
}

.miniDot:hover::after,
.miniDot:focus-visible::after{
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}


@media (max-width: 820px){
  .miniMap{ display:none; }
}

/* Table ↔ Timeline highlight */
#career-table-body tr.is-linked{
  background: color-mix(in oklab, var(--tone-accent) 14%, transparent);
}

#career-table-body tr.is-linked td{
  border-color: color-mix(in oklab, var(--tone-accent) 32%, transparent);
}

.timeline-item.is-linked{
  outline: 2px solid color-mix(in oklab, var(--tone-accent) 55%, transparent);
  outline-offset: 4px;


/* Chart ↔ Table ↔ Timeline highlight (non-destructive; separate class) */
#career-table-body tr.is-xlinked{
  background: color-mix(in oklab, var(--tone-accent) 10%, transparent);
}
#career-table-body tr.is-xlinked td{
  border-color: color-mix(in oklab, var(--tone-accent) 24%, transparent);
}
.timeline-item.is-xlinked{
  outline: 2px solid color-mix(in oklab, var(--tone-accent) 42%, transparent);
  outline-offset: 4px;
}

}

/* FLIP ghost */
.flyGhost{
  box-shadow: 0 22px 55px rgba(15,23,42,.18);
  border-radius: 14px;
}

@media (prefers-reduced-motion: reduce){
  .miniDot{ transition:none; }
}



/* Guided attention (table click -> timeline card) */
@keyframes peekPulse{
  0%   { box-shadow: 0 0 0 0 rgba(17,24,39,.0); transform: translateY(0); }
  25%  { box-shadow: 0 0 0 6px rgba(17,24,39,.10); transform: translateY(-1px); }
  55%  { box-shadow: 0 0 0 10px rgba(17,24,39,.06); }
  100% { box-shadow: 0 0 0 0 rgba(17,24,39,.0); transform: translateY(0); }
}
.timeline-item.is-peek{
  animation: peekPulse 900ms cubic-bezier(.2,.8,.2,1) both;
}

/* =========================================================
   Color Tone v7 (2025-26)
   - Neutral materiality + calm tech accent
   - Keeps content unchanged; updates tone only
   ========================================================= */

:root{
  /* Core palette */
  --bg:  #fbfaf7;        /* warm off-white "paper" */
  --bg2: #f0ece4;        /* warmer top tint */
  --surface: rgba(255,255,255,.74);
  --surface-strong: rgba(255,255,255,.92);

  --text: #141316;       /* ink */
  --muted: rgba(20,19,22,.64);
  --muted2: rgba(20,19,22,.46);

  --line: rgba(20,19,22,.12);
  --line2: rgba(20,19,22,.18);

  --shadow-1: 0 10px 30px rgba(20,19,22,.10);
  --shadow-2: 0 18px 55px rgba(20,19,22,.14);

  /* Accent (calm, modern) */
  --accent: #0f766e;     /* aquatic teal */
  --accent-rgb: 15 118 110;
  --accent-ink: #115e59;
  --accent-soft: rgba(15,118,110,.14);

  /* Secondary warm accent (optional) */
  --warm: #a47864;       /* mocha-like */
  --warm-rgb: 164 120 100;
  --warm-soft: rgba(164,120,100,.12);

  /* Category colors (charts / timeline) */
  --cat-food:   #0f766e;
  --cat-system: #6d28d9;
  --cat-store:  #d97706;
  --cat-retail: #2563eb;
  --cat-fin:    #be185d;
  --cat-wood:   #a16207;
  --cat-light:  #0284c7;
  --cat-auto:   #7c3aed;
  --cat-azen:   #15803d;
}

/* Background & typography */
html{
  background: linear-gradient(to bottom, var(--bg2), var(--bg));
}

body{
  color: var(--text);
}

/* Subtle modern texture (very light) */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(900px 650px at 18% 10%, rgba(var(--accent-rgb), .07), transparent 60%),
    radial-gradient(820px 560px at 86% 18%, rgba(var(--warm-rgb), .06), transparent 58%),
    linear-gradient(to bottom, rgba(20,19,22,.025), transparent 38%);
  opacity: .95;
  z-index: 0;
}
body > *{ position: relative; z-index: 1; }

/* Header becomes modern "glass" */
header{
  background: rgba(255,255,255,.66);
  color: var(--text);
  border-bottom: 1px solid var(--line);
}
header a{ color: var(--text); }
nav a{ opacity: .86; }
nav a:hover{ opacity: 1; text-decoration: none; }
nav a:focus-visible{
  outline: 2px solid rgba(var(--accent-rgb), .55);
  outline-offset: 3px;
  border-radius: 10px;
}

/* Hero card */
.hero-main{
  background: radial-gradient(circle at top left, rgba(255,255,255,.90), var(--bg2));
  border: 1px solid var(--line);
  box-shadow: var(--shadow-2);
  color: var(--text);
}
.hero-subtitle{ color: var(--muted); }

/* Section headings */
h2{
  border-left-color: var(--accent);
  background: linear-gradient(90deg, rgba(var(--accent-rgb), .14), transparent);
}
h3{ color: var(--text); }

/* Tables & cards (soft material) */
table{
  border-color: var(--line);
}
th, td{
  border-color: var(--line);
}
thead th{
  background: rgba(255,255,255,.60);
}
tbody tr:nth-child(even){
  background: rgba(255,255,255,.38);
}

/* Motion patch components adopt palette */
.backdrop{ background: rgba(0,0,0,.20); }

.focusPanel{
  background: var(--surface-strong);
  border: 1px solid var(--line);
  box-shadow: var(--shadow-2);
}
.focusTop{ border-bottom: 1px solid var(--line); }
.focusTitle{ color: var(--muted); }
.focusClose{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.86);
}

.miniMap{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.68);
  box-shadow: 0 16px 40px rgba(20,19,22,.10);
}
.miniDot{
  background: rgba(20,19,22,.18);
}
.miniDot.is-active{
  background: rgba(var(--accent-rgb), .85);
}
.miniDot:focus-visible{
  outline: 2px solid rgba(var(--accent-rgb), .65);
}
.miniDot::after{
  background: rgba(255,255,255,.90);
  border: 1px solid var(--line);
  color: var(--text);
  box-shadow: 0 14px 34px rgba(20,19,22,.12);
}

/* Timeline category accents (override to match v7 palette) */
.timeline-item-food   { border-color: color-mix(in srgb, var(--cat-food)   45%, transparent); }
.timeline-item-food::before   { background: linear-gradient(90deg, var(--cat-food), transparent); }

.timeline-item-system { border-color: color-mix(in srgb, var(--cat-system) 45%, transparent); }
.timeline-item-system::before { background: linear-gradient(90deg, var(--cat-system), transparent); }

.timeline-item-store  { border-color: color-mix(in srgb, var(--cat-store)  48%, transparent); }
.timeline-item-store::before  { background: linear-gradient(90deg, var(--cat-store), transparent); }

.timeline-item-retail { border-color: color-mix(in srgb, var(--cat-retail) 40%, transparent); }
.timeline-item-retail::before { background: linear-gradient(90deg, var(--cat-retail), transparent); }

.timeline-item-fin    { border-color: color-mix(in srgb, var(--cat-fin)    44%, transparent); }
.timeline-item-fin::before    { background: linear-gradient(90deg, var(--cat-fin), transparent); }

.timeline-item-wood   { border-color: color-mix(in srgb, var(--cat-wood)   46%, transparent); }
.timeline-item-wood::before   { background: linear-gradient(90deg, var(--cat-wood), transparent); }

.timeline-item-light  { border-color: color-mix(in srgb, var(--cat-light)  46%, transparent); }
.timeline-item-light::before  { background: linear-gradient(90deg, var(--cat-light), transparent); }

.timeline-item-auto   { border-color: color-mix(in srgb, var(--cat-auto)   44%, transparent); }
.timeline-item-auto::before   { background: linear-gradient(90deg, var(--cat-auto), transparent); }

.timeline-item-azen   { border-color: color-mix(in srgb, var(--cat-azen)   46%, transparent); }
.timeline-item-azen::before   { background: linear-gradient(90deg, var(--cat-azen), transparent); }

/* Timeline meta (first line) follows category */
.timeline-item-food   .timeline-meta:first-of-type { color: var(--cat-food); }
.timeline-item-system .timeline-meta:first-of-type { color: var(--cat-system); }
.timeline-item-store  .timeline-meta:first-of-type { color: var(--cat-store); }
.timeline-item-retail .timeline-meta:first-of-type { color: var(--cat-retail); }
.timeline-item-fin    .timeline-meta:first-of-type { color: var(--cat-fin); }
.timeline-item-wood   .timeline-meta:first-of-type { color: var(--cat-wood); }
.timeline-item-light  .timeline-meta:first-of-type { color: var(--cat-light); }
.timeline-item-auto   .timeline-meta:first-of-type { color: var(--cat-auto); }
.timeline-item-azen   .timeline-meta:first-of-type { color: var(--cat-azen); }


/* ============================================================
   Color Tone v8 (2025–26):
   Warm neutral / earthy brown + calm teal/blue accent
   (added at end to override earlier hard-coded colors)
   ============================================================ */

:root{
  --tone-bg1: #fbf7f0;           /* warm off-white */
  --tone-bg2: #f1ece3;           /* warm gray-beige */
  --tone-panel: rgba(255,255,255,.76);
  --tone-panel-2: rgba(255,253,249,.82);
  --tone-ink: #1f2328;
  --tone-muted: rgba(31,35,40,.70);
  --tone-line: rgba(31,35,40,.14);
  --tone-shadow: 0 20px 55px rgba(31,35,40,.12);

  --tone-accent: #0f766e;        /* teal */
  --tone-accent-soft: rgba(15,118,110,.12);
  --tone-accent-2: #2563eb;      /* calm blue (secondary) */
  --tone-brown: #6b4f3a;         /* earthy brown for subtle emphasis */
}

/* base */
html{
  background: linear-gradient(to bottom, var(--tone-bg2), var(--tone-bg1)) !important;
}
body{
  color: var(--tone-ink) !important;
}

/* header: glassy warm neutral (more visible than v7) */
header{
  background: rgba(251,247,240,.78) !important;
  color: var(--tone-ink) !important;
  border-bottom: 1px solid var(--tone-line) !important;
  box-shadow: 0 10px 30px rgba(31,35,40,.08);
}
nav a{
  color: var(--tone-ink) !important;
  opacity: .85 !important;
}
nav a:hover{
  border-bottom-color: var(--tone-accent) !important;
}
header .site-title{
  color: var(--tone-ink) !important;
}

/* section surfaces */
section:nth-of-type(odd){
  background: rgba(255,253,249,.92) !important;
}
section:nth-of-type(even){
  background: rgba(243,237,228,.60) !important;
}

/* typography accents */
h1,h2,h3,h4{ color: var(--tone-ink) !important; }
p{ color: var(--tone-muted) !important; }
.muted{ color: rgba(31,35,40,.58) !important; }

h2{
  border-left-color: var(--tone-accent) !important;
  background: linear-gradient(90deg, var(--tone-accent-soft), rgba(251,247,240,0)) !important;
}

/* hero */
.hero-main{
  background: radial-gradient(circle at top left, rgba(255,253,249,.96), rgba(241,236,227,.88)) !important;
  border: 1px solid var(--tone-line) !important;
  box-shadow: var(--tone-shadow) !important;
}
.hero-stat{
  background: rgba(255,253,249,.92) !important;
  border: 1px solid var(--tone-line) !important;
}
.hero-stat-label{ color: rgba(31,35,40,.60) !important; }

/* tables */
table{
  border-color: var(--tone-line) !important;
  background: rgba(255,253,249,.92) !important;
}
th{
  background: rgba(15,118,110,.08) !important;
  color: var(--tone-ink) !important;
}
td{ border-color: rgba(31,35,40,.10) !important; }

/* detail cards + focus panel */
.detailCard{
  background: rgba(255,253,249,.88) !important;
  border-color: rgba(31,35,40,.16) !important;
}
.detailCard:hover{
  box-shadow: 0 18px 45px rgba(31,35,40,.12) !important;
}
.backdrop{
  background: rgba(31,35,40,.22) !important;
}
.focusPanel{
  background: rgba(255,253,249,.92) !important;
  border-color: rgba(31,35,40,.18) !important;
}
.focusClose{
  border-color: rgba(31,35,40,.16) !important;
}

/* minimap (right-side dots) */
.miniMap{
  background: rgba(255,253,249,.74) !important;
  border-color: rgba(31,35,40,.14) !important;
}
.miniDot{
  border-color: rgba(31,35,40,.22) !important;
  background: rgba(31,35,40,.16) !important;
}
.miniDot.is-active,
.miniDot[aria-current="true"]{
  background: var(--tone-accent) !important;
  border-color: rgba(15,118,110,.40) !important;
}
.miniDot::after{
  background: rgba(31,35,40,.88) !important;
  color: rgba(255,253,249,.96) !important;
  border: 1px solid rgba(255,253,249,.14) !important;
}

/* links: subtle but modern */
a:hover{
  text-decoration-color: rgba(15,118,110,.45);
}

/* ============================================================
   v9 Patch: Header/Footer unify + Fixed header (2025-12-15)
   ============================================================ */

:root{
  --header-surface: rgba(255,253,249,.80);
  --header-line: rgba(92,70,43,.18);
}

/* Fixed header: robust across iOS/desktop */
header{
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 800 !important; /* below modal(1000+) */
  background: var(--header-surface) !important;
  color: var(--tone-ink) !important;
  border-bottom: 1px solid var(--header-line) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}

/* Footer matches header surface */
footer{
  background: var(--header-surface) !important;
  color: var(--tone-muted) !important;
  border-top: 1px solid var(--header-line) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}

/* Offset content for fixed header */
:root{
  /* Anchor offset is intentionally a bit smaller than header height:
     Sections have generous top padding, so this reduces the perceived “gap”
     while still keeping headings visible. */
  --anchor-offset: clamp(12px, calc(var(--header-h, 56px) - 18px), 54px);
}

html{
  scroll-padding-top: var(--anchor-offset);
}
body{
  padding-top: var(--header-h, 56px);
}

/* Anchor offset without changing layout (works for native hash jumps) */
section[id]::before,
article[id]::before{
  content: "";
  display: block;
  height: var(--anchor-offset);
  margin-top: calc(-1 * var(--anchor-offset));
}

/* Avoid double offsets from generic scroll-margin rules */
section, h2, h3, [id]{
  scroll-margin-top: 0;
}



/* ============================================================
   v13: Link system + typography tuning + accessibility (2025-12-15)
   ============================================================ */

:root{
  --measure: 72ch;
  --tone-link: color-mix(in oklab, var(--tone-accent) 78%, #0b1220);
  --tone-link-weak: color-mix(in oklab, var(--tone-link) 48%, transparent);
}

/* Reading measure: keep long-form text comfortable without shrinking layouts */
main p,
main li{
  max-width: var(--measure);
  line-height: 1.85;
}

@supports (text-wrap: pretty){
  main p, main li{ text-wrap: pretty; }
}

/* Link states (consistent, modern, accessible) */
a{
  color: var(--tone-link);
  text-decoration-color: var(--tone-link-weak);
  text-decoration-thickness: 0.08em;
  text-underline-offset: 0.18em;
}
a:hover{
  text-decoration-thickness: 0.12em;
  text-decoration-color: color-mix(in oklab, var(--tone-link) 70%, transparent);
}
a:visited{
  color: color-mix(in oklab, var(--tone-link) 78%, #5b3a1d);
}
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible{
  outline: 2px solid color-mix(in oklab, var(--tone-accent) 70%, #ffffff);
  outline-offset: 3px;
  border-radius: 12px;
}

/* Header nav: keep text crisp, add subtle active marker without layout shift */
header nav a{
  color: var(--tone-ink) !important;
  text-decoration: none;
  position: relative;
}
header nav a.is-active::after,
header nav a[aria-current="page"]::after{
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -0.55rem;
  height: 2px;
  border-radius: 99px;
  background: color-mix(in oklab, var(--tone-accent) 68%, transparent);
}

/* Table links: always feel interactive */
a.career-link{
  text-decoration-color: color-mix(in oklab, var(--tone-link) 42%, transparent);
}
a.career-link:hover{
  text-decoration-color: color-mix(in oklab, var(--tone-link) 78%, transparent);
}

/* Reduced motion: avoid extra transitions */
@media (prefers-reduced-motion: reduce){
  a, button, [role="button"]{ transition: none !important; }
}


/* ============================================================
   v14 Patch: Header nav underline normalization (single line)
   - remove double lines (border + pseudo)
   - keep a single active indicator line
   ============================================================ */

header{
  border-bottom: none !important; /* avoid grey line competing with active marker */
  box-shadow: 0 10px 26px rgba(15,23,42,.08) !important; /* separation without line */
}

header nav a{
  text-decoration: none !important;
}

header nav a:hover,
header nav a:focus,
header nav a:active{
  text-decoration: none !important; /* prevent double underline on hover */
}

/* avoid visited color drift in header nav */
header nav a:visited{
  color: var(--tone-ink) !important;
}

/* Disable legacy border-bottom indicator (keep only ::after) */
header nav a.is-active,
header nav a[aria-current="page"]{
  border-bottom: none !important;
}

/* Single active line positioning */
header nav a.is-active::after,
header nav a[aria-current="page"]::after{
  bottom: -0.28rem; /* slightly closer to text */
  height: 2px;
  background: color-mix(in oklab, var(--tone-accent) 78%, transparent);
}




/* ============================================================
   v15: Nav underline single source of truth + minimap label
   ============================================================ */

/* Ensure header nav underline is always a single line */
header nav a{
  border-bottom: none !important;
  text-decoration: none !important;
  position: relative;
  padding-bottom: 0.45rem; /* room for underline */
}

/* single underline (no double line) */
header nav a::after{
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0.18rem;
  height: 2px;
  border-radius: 999px;
  background: var(--tone-accent, rgba(2,132,199,1));
  transform: scaleX(0);
  transform-origin: left;
  opacity: 0;
  transition: transform 220ms cubic-bezier(.2,.8,.2,1), opacity 220ms cubic-bezier(.2,.8,.2,1);
}

header nav a:hover::after,
header nav a:focus-visible::after{
  transform: scaleX(.7);
  opacity: .45;
}

header nav a.is-active::after,
header nav a[aria-current="page"]::after{
  transform: scaleX(1);
  opacity: 1;
}

/* Mini map dot labels */
.miniDot{
  outline: none;
}
.miniDotLabel{
  position: absolute;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);
  white-space: nowrap;
  font-size: 12px;
  line-height: 1;
  padding: 6px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(17,24,39,.12);
  box-shadow: 0 10px 24px rgba(15,23,42,.10);
  color: rgba(17,24,39,.88);
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms cubic-bezier(.2,.8,.2,1), transform 160ms cubic-bezier(.2,.8,.2,1);
}

.miniDot:hover .miniDotLabel,
.miniDot:focus-visible .miniDotLabel{
  opacity: 1;
  transform: translateY(-50%) translateX(-4px);
}

/* In very small screens, keep minimap hidden as designed */
@media (max-width: 820px){
  .miniMap{ display: none; }
}


/* ============================================================
   v17: MiniMap tooltip label fix
   - Avoid the dot overlapping the last character
   - Single source of truth: miniDot::after reads data-label
   ============================================================ */

/* The span-based tooltip is deprecated (kept only for backward compatibility) */
.miniDotLabel{ display: none !important; }

/* Definitive tooltip positioning */
.miniDot::after{
  content: attr(data-label) !important;
  right: calc(100% + 14px) !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  z-index: 2 !important;
}

.miniDot:hover::after,
.miniDot:focus-visible::after{
  opacity: 1 !important;
  transform: translateY(-50%) !important;
}

/* ============================================================
   v18: Timeline card color linkage (Chart ↔ Timeline)
   - Restore/upgrade the “top accent” per category
   - Use the same CSS variables as charts ( --cat-* )
   - Add a subtle color dot on the title for stronger association
   ============================================================ */

.timeline-item{
  overflow: hidden;
  --tl-color: var(--tone-accent);
  /* fallback: keep existing border; override where supported */
}

/* map timeline classes to chart palette vars */
.timeline-item-food{    --tl-color: var(--cat-food); }
.timeline-item-system{  --tl-color: var(--cat-system); }
.timeline-item-store{   --tl-color: var(--cat-store); }
.timeline-item-retail{  --tl-color: var(--cat-retail); }
.timeline-item-finance{ --tl-color: var(--cat-fin); }
.timeline-item-wood{    --tl-color: var(--cat-wood); }
.timeline-item-light{   --tl-color: var(--cat-light); }
.timeline-item-auto{    --tl-color: var(--cat-auto); }
.timeline-item-azen{    --tl-color: var(--cat-azen); }

/* top accent strip (previously too thin; now clearly visible) */
.timeline-item-accent::before{
  height: 10px;
  border-radius: 14px 14px 0 0;
  opacity: .96;
  background: linear-gradient(90deg, var(--tl-color), rgba(0,0,0,0));
}

/* tie the first meta line to the category color */
.timeline-item-accent .timeline-meta:first-of-type{
  color: var(--tl-color);
}

/* title dot (low-noise, high clarity) */
.timeline-title{
  position: relative;
  padding-left: 14px;
}
.timeline-title::before{
  content:"";
  position:absolute;
  left:0;
  top: 0.72em;
  transform: translateY(-50%);
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--tl-color);
}

/* Enhanced readability + premium feel (modern browsers) */
@supports (color: color-mix(in oklab, white 50%, black)){
  .timeline-item{
    border-color: color-mix(in oklab, var(--tl-color) 34%, rgba(31,35,40,.16));
  }

  .timeline-item-accent::before{
    background: linear-gradient(
      90deg,
      color-mix(in oklab, var(--tl-color) 92%, white 8%),
      rgba(0,0,0,0)
    );
  }

  .timeline-item-accent .timeline-meta:first-of-type{
    color: color-mix(in oklab, var(--tl-color) 78%, var(--text) 22%);
  }

  .timeline-title::before{
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--tl-color) 14%, transparent);
  }
}

/* Opening overlay */
body.is-opening{
  overflow: hidden;
}

.opening-overlay{
  position: fixed;
  inset: 0;
  z-index: 1400;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;
  color: #f8fafc;
  cursor: pointer;
  background:
    radial-gradient(1200px circle at 18% 20%, rgba(56, 189, 248, 0.22), transparent 55%),
    radial-gradient(900px circle at 82% 12%, rgba(16, 185, 129, 0.18), transparent 55%),
    linear-gradient(140deg, #0b1220, #111827 55%, #0b1a24);
  transition: opacity 420ms ease, visibility 420ms ease;
}

.opening-overlay::after{
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(420px circle at 50% 48%, rgba(56, 189, 248, 0.35), transparent 62%);
  opacity: 0.7;
}

.opening-overlay.is-fade{
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.opening-content{
  position: relative;
  z-index: 1;
  max-width: 760px;
}

.opening-title{
  font-size: clamp(1.6rem, 3.2vw, 2.6rem);
  font-weight: 700;
  letter-spacing: 0.1em;
}

.opening-line{
  margin-top: 0.85rem;
  font-size: clamp(1rem, 2.5vw, 1.6rem);
  font-weight: 700;
  text-shadow: 0 0 18px rgba(56, 189, 248, 0.35);
}

.opening-progress{
  position: relative;
  width: min(420px, 70vw);
  height: 6px;
  margin: 1.2rem auto 0;
  border-radius: 999px;
  background: rgba(248, 250, 252, 0.18);
  overflow: hidden;
}

.opening-progress-bar{
  height: 100%;
  width: 0%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(125, 211, 252, 0.2), rgba(56, 189, 248, 0.95));
  box-shadow: 0 0 16px rgba(56, 189, 248, 0.6);
  transition: width 120ms linear;
}
/* =========================================================
   2025-12 Dynamic Hero Refresh (Intro only)
   - Neon / glass hero to match opening overlay
   - Scoped to #intro only
   ========================================================= */
#intro{
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(900px 600px at 15% 10%, rgba(56,189,248,.26), transparent 60%),
    radial-gradient(900px 650px at 85% 18%, rgba(167,139,250,.22), transparent 62%),
    radial-gradient(700px 520px at 55% 88%, rgba(16,185,129,.18), transparent 62%),
    linear-gradient(140deg, #050914, #0b1220 55%, #081a24) !important;
  padding-top: var(--intro-pad-top, revert);
}

#intro::before{
  content:"";
  position:absolute;
  inset:-45%;
  pointer-events:none;
  background: conic-gradient(
    from 180deg at 50% 50%,
    rgba(56,189,248,.40),
    rgba(167,139,250,.36),
    rgba(16,185,129,.30),
    rgba(56,189,248,.40)
  );
  filter: blur(90px);
  opacity: .18;
  transform: rotate(0deg);
  animation: var(--intro-before-anim, none);
}

#intro::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(600px 320px at 50% 35%, rgba(56,189,248,.18), transparent 62%),
    radial-gradient(900px 520px at 50% 100%, rgba(2,6,23,.65), transparent 70%);
  opacity: .9;
}

#intro > .container{
  position: relative;
  z-index: 1;
}

#intro .hero-main{
  background: rgba(11,18,32,.72) !important;
  border: 1px solid rgba(125,211,252,.22) !important;
  padding: var(--intro-hero-pad, 2rem 1.8rem) !important;
  box-shadow:
    0 26px 70px rgba(2,6,23,.55),
    0 0 0 1px rgba(56,189,248,.08) inset !important;
  backdrop-filter: blur(14px);
}

@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
  #intro .hero-main{ background: rgba(11,18,32,.88) !important; }
}

#intro h1,
#intro .hero-subtitle{
  color: #f8fafc !important;
}

#intro p{
  color: rgba(226,232,240,.86) !important;
}

#intro .hero-tagline{
  color: rgba(226,232,240,.84) !important;
  letter-spacing: .06em;
}

#intro .hero-stat{
  background: rgba(15,23,42,.52) !important;
  border: 1px solid rgba(148,163,184,.22) !important;
  box-shadow: 0 14px 38px rgba(2,6,23,.35) !important;
}

#intro .hero-stat-label{
  color: rgba(226,232,240,.72) !important;
}

#intro .hero-stat-value{
  color: #f8fafc !important;
  text-shadow: 0 0 18px rgba(56,189,248,.18);
}

/* Intro stats harmonize (remove light bar + unify dark glass cards) */
#intro .hero-meta{
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
  gap: 12px;
  flex-wrap: wrap;
}

#intro .hero-stat{
  background: rgba(11,18,32,.58) !important;
  border: 0 !important;
  position: relative;
  box-shadow:
    0 16px 38px rgba(2,6,23,.38),
    inset 0 0 0 1px rgba(255,255,255,.04) !important;
  border-radius: 18px !important;
}

#intro .hero-stat::after{
  content: "";
  position: absolute;
  left: 18px;
  right: 18px;
  bottom: 10px;
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(56,189,248,.65), rgba(16,185,129,.55), rgba(56,189,248,.15));
  opacity: 0.85;
  pointer-events: none;
}

#intro .hero-stat:first-child{
  min-width: 120px;
}

#intro .hero-stat:last-child{
  flex: 1 1 260px;
  min-width: min(340px, 100%);
}

#intro .hero-stat{
  padding: 14px 18px 24px !important;
  min-height: 72px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

#intro .hero-stat-label{
  margin-bottom: 6px;
  line-height: 1.2;
}

#intro .hero-stat-value{
  line-height: 1.25;
}

#intro .hero-stat:last-child .hero-stat-value{
  white-space: normal;
}

@media (max-width: 520px){
  :root{
    --intro-pad-top: 64px;
    --intro-hero-pad: 18px 16px;
  }
  #intro .hero-stat{
    padding: 12px 14px 20px !important;
    min-height: 0;
  }
}

@media (prefers-reduced-motion: no-preference){
  :root{ --intro-before-anim: introSpin 14s linear infinite; }
}
@media (prefers-reduced-motion: reduce){
  :root{ --intro-before-anim: none; }
}

@keyframes introSpin{
  to{ transform: rotate(360deg); }
}

/* ============================================================
   v20 Felt + Bento Layouts (2025-12-30)
   - Material tokens, paper/felt surface + noise
   - Bento grids for overview/history/products
   - Section stacking panels
   ============================================================ */

:root{
  --felt-base: #f6efe6;
  --felt-deep: #efe6da;
  --felt-ink: #1f2328;
  --felt-muted: rgba(31, 35, 40, 0.72);
  --felt-line: rgba(31, 35, 40, 0.12);
  --felt-shadow: 0 22px 60px rgba(31, 35, 40, 0.16);

  --paper-surface: rgba(255, 252, 247, 0.92);
  --paper-surface-2: rgba(251, 245, 238, 0.85);

  --card-radius: 20px;
  --card-bg: rgba(255, 255, 255, 0.92);
  --card-line: rgba(31, 35, 40, 0.14);
  --card-shadow: 0 18px 45px rgba(31, 35, 40, 0.14);
  --card-shadow-hover: 0 26px 60px rgba(31, 35, 40, 0.18);

  --doodle-ink: rgba(31, 35, 40, 0.22);
  --doodle-wave: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='80' viewBox='0 0 160 80'%3E%3Cpath d='M5 50 C25 20, 55 70, 80 40 C105 10, 135 60, 155 30' fill='none' stroke='%2332353b' stroke-width='2.4' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  --doodle-loop: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cpath d='M24 72 C24 32, 116 32, 116 72 C116 112, 24 112, 24 72 Z' fill='none' stroke='%2332353b' stroke-width='2.4' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M46 70 C46 52, 94 52, 94 70 C94 88, 46 88, 46 70 Z' fill='none' stroke='%2332353b' stroke-width='2.1' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  --felt-noise: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='0.22'/%3E%3C/svg%3E");
}

html{
  background: linear-gradient(160deg, var(--felt-deep), var(--felt-base)) !important;
}

body{
  color: var(--felt-ink) !important;
  background: transparent;
}

body::before{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    var(--felt-noise),
    radial-gradient(900px 700px at 12% 12%, rgba(15, 118, 110, 0.10), transparent 65%),
    radial-gradient(700px 600px at 88% 16%, rgba(99, 102, 241, 0.08), transparent 62%),
    radial-gradient(800px 600px at 60% 90%, rgba(166, 123, 91, 0.10), transparent 62%);
  mix-blend-mode: multiply;
  opacity: 0.65;
  z-index: 0;
}

body > *{
  position: relative;
  z-index: 1;
}

main{
  padding: 1.6rem 0 4.2rem;
}

section{
  position: relative;
  background: linear-gradient(180deg, var(--paper-surface), var(--paper-surface-2)) !important;
  border: 1px solid var(--felt-line);
  border-radius: 26px;
  box-shadow: var(--felt-shadow);
  margin: 0 1.2rem;
  overflow: visible;
}

section + section{
  margin-top: -2.6rem;
}

@media (max-width: 820px){
  section{
    border-radius: 20px;
    margin: 0 0.9rem;
  }
  section + section{
    margin-top: -1.6rem;
  }
}

@media (min-width: 1200px){
  section{
    margin: 0 auto;
    max-width: 1200px;
  }
}

section#intro{ z-index: 10; }
section#overview{ z-index: 20; }
section#history{ z-index: 30; }
section#products{ z-index: 40; }
section#closing{ z-index: 50; }

section#overview::before,
section#history::before,
section#products::before{
  content: "";
  position: absolute;
  width: 160px;
  height: 90px;
  background-image: var(--doodle-wave);
  background-repeat: no-repeat;
  background-size: contain;
  opacity: 0.35;
  pointer-events: none;
}

section#overview::before{
  top: 24px;
  right: 28px;
}

section#history::before{
  top: 28px;
  left: 22px;
  transform: rotate(-6deg);
}

section#products::before{
  top: 26px;
  right: 22px;
  transform: rotate(4deg);
}

section#overview::after,
section#closing::after{
  content: "";
  position: absolute;
  width: 120px;
  height: 120px;
  background-image: var(--doodle-loop);
  background-repeat: no-repeat;
  background-size: contain;
  opacity: 0.28;
  pointer-events: none;
}

section#overview::after{
  bottom: 22px;
  left: 18px;
}

section#closing::after{
  bottom: 24px;
  right: 16px;
}

#intro{
  background: linear-gradient(160deg, rgba(255, 252, 247, 0.96), rgba(244, 236, 226, 0.88)) !important;
}

#intro::before,
#intro::after{
  animation: none !important;
  filter: none !important;
  opacity: 0.2 !important;
}

#intro .hero-main{
  background: rgba(255, 255, 255, 0.92) !important;
  border: 1px solid var(--card-line) !important;
  box-shadow: var(--card-shadow) !important;
  backdrop-filter: blur(6px);
}

#intro h1,
#intro .hero-subtitle,
#intro p{
  color: var(--felt-ink) !important;
}

#intro .hero-stat{
  background: rgba(255, 255, 255, 0.92) !important;
  border: 1px solid var(--card-line) !important;
  box-shadow: 0 14px 32px rgba(31, 35, 40, 0.12) !important;
}

#intro .hero-stat::after{
  opacity: 0.2;
}

.card,
.timeline-item{
  background: var(--card-bg) !important;
  border: 1px solid var(--card-line) !important;
  border-radius: var(--card-radius) !important;
  box-shadow: var(--card-shadow) !important;
  transition: transform 200ms ease, box-shadow 240ms ease;
}

.card:hover,
.timeline-item:hover{
  transform: translateY(-3px);
  box-shadow: var(--card-shadow-hover) !important;
}

.card:focus-within,
.timeline-item:focus-within{
  transform: translateY(-3px);
  box-shadow: var(--card-shadow-hover) !important;
}

@media (prefers-reduced-motion: reduce){
  .card,
  .timeline-item{
    transition: none !important;
    transform: none !important;
  }
}

/* Bento layouts */
section#overview .chart-layout{
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 1.4rem;
}

@media (min-width: 1024px){
  section#overview .chart-layout{
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.8rem;
  }
}

section#history .timeline{
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 1.2rem;
}

@media (min-width: 1024px){
  section#history .timeline{
    grid-template-columns: repeat(3, minmax(0, 1fr));
    grid-auto-flow: dense;
    gap: 1.5rem;
  }

  section#history .timeline > .timeline-item:nth-child(3n + 1){
    grid-column: span 2;
  }

  section#history .timeline > .timeline-item:nth-child(5n){
    grid-row: span 2;
  }
}

section#products .grid-products{
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 1.3rem;
}

@media (min-width: 1024px){
  section#products .grid-products{
    grid-template-columns: repeat(3, minmax(0, 1fr));
    grid-auto-flow: dense;
    gap: 1.6rem;
  }

section#products .grid-products > #california-roll{
    grid-column: span 2;
    grid-row: span 2;
  }
}

/* =========================
   V2: Panel content visibility + layering safety
   (Fix: blank panels / hidden section content)
   ========================= */

:root{
  /* overlap量を安全側に寄せる（必要なら後で微調整） */
  --panel-overlap: clamp(18px, 4vw, 56px);
  --panel-pad-y: clamp(24px, 5vw, 72px);
  --panel-pad-x: clamp(14px, 3vw, 40px);

  /* 文字色の最低保証（既存トークンがあればそちら優先でOK） */
  --ink-safe: #13222c;
}

/* セクション自体を確実なスタッキングコンテキストに */
section{
  position: relative;
  isolation: isolate;
  min-height: auto !important;
  padding: var(--panel-pad-y) var(--panel-pad-x);
  color: var(--ink, var(--ink-safe));
}

/* 次セクションが上にせり上がる：重なり量を変数で制御 */
section + section{
  margin-top: calc(var(--panel-overlap) * -1);
}

/* モバイルは重なり浅くして破綻回避 */
@media (max-width: 768px){
  :root{ --panel-overlap: 18px; }
}

/* 疑似要素（紙面/ドゥードル）が本文を覆わないように必ず背面へ */
section::before,
section::after{
  pointer-events: none;
  z-index: 0 !important;
}

/* 本文コンテナを必ず前面へ（ここが最重要） */
section > .container{
  position: relative;
  z-index: 2 !important;
}

/* 念のため、主要ブロックも前面へ（header/timeline/productsなど） */
section .section-header,
section .chart-layout,
section .timeline,
section .grid-products{
  position: relative;
  z-index: 2 !important;
}

/* 主要カード要素も前面保証（既存のhover/影はそのまま活きる） */
.card,
.timeline-item,
.product-card{
  position: relative;
  z-index: 3;
}

/* もし何らかの理由で透明化されていた場合の保険（強すぎる場合は後で弱める） */
.section-header,
.timeline-item,
.product-card,
.card{
  opacity: 1;
  visibility: visible;
}

/* 文字が背景と同化する事故の保険（リンク等） */
section a,
section h1, section h2, section h3,
section p, section li, section small{
  color: inherit;
}

/* =========================================================
   UI/UX polish v1 (non-invasive)
   - No text changes / No DOM changes
   - CSS overrides only (safe layer)
   ========================================================= */

/* Baseline readability */
html { text-size-adjust: 100%; }
body {
  line-height: 1.7;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Consistent content width and breathing room */
main {
  max-width: 1040px;
  margin-inline: auto;
  padding-inline: clamp(16px, 3vw, 28px);
}
section {
  padding-block: clamp(24px, 4vw, 56px);
}

/* Safer media defaults */
img, svg, video, canvas {
  max-width: 100%;
  height: auto;
}

/* Sticky nav polish (if nav is present and already laid out) */
nav {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
@supports not ((backdrop-filter: blur(10px))) {
  nav { background: rgba(255,255,255,0.96); }
}

/* Click/keyboard affordance */
a, button, [role="button"], .timeline-collapsible, .product-card-collapsible {
  -webkit-tap-highlight-color: transparent;
}
:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 3px;
}

/* Card / timeline tactile feel (subtle, avoids palette changes) */
.card, .product-card, .timeline-item {
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,0.10);
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}
.timeline-collapsible, .product-card-collapsible {
  cursor: pointer;
}
.timeline-item, .product-card {
  transition: transform 140ms ease, box-shadow 140ms ease;
}
.timeline-item:hover, .product-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.10);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
